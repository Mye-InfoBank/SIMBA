process {

    /***************************************************
     * SCISSOR
     ***************************************************/

    withName: ".*scissor:SPLIT_ANNDATA" {
        container = "containers/pircher-sc-integrate2_centos7.sif"
        publishDir = [
            path: "${params.outdir}/scissor/adata_by_sample",
            mode: params.publish_dir_mode
        ]
    }
    withName: ".*scissor:H5AD_TO_SCE" {
        publishDir = [
            path: "${params.outdir}/scissor/adata_by_sample",
            mode: params.publish_dir_mode
        ]
    }
    withName: ".*scissor:SCISSOR" {
        errorStrategy = 'ignore'
        conda = "/data/scratch/sturm/conda/envs/2020-pircher-scissor"
        publishDir = [
            path: "${params.outdir}/scissor/scissor_by_sample",
            mode: params.publish_dir_mode
        ]
    }


    /***************************************************
     * DE TUMOR/NORMAL
     ***************************************************/

    withName: ".*de_tumor_normal:PREPARE_FOR_DE" {
        ext.kernel = "python3"
        container = "containers/pircher-sc-integrate2_centos7.sif"
        publishDir = [
            path: "${params.outdir}/de_tumor_normal/41_prepare_for_de",
            mode: params.publish_dir_mode
        ]
    }
    withName: ".*de_tumor_normal:DE_EDGER_TUMOR_NORMAL" {
        publishDir = [
            path: "${params.outdir}/de_tumor_normal/de_edger",
            mode: params.publish_dir_mode
        ]
    }

}

