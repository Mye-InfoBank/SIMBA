params {
    bam_files = "/home/sturm/Downloads/lung_scvelo/*.bam"
    gtf = "/data/genomes/hg38/annotation/gencode/gencode.v29.primary_assembly.annotation.gtf.gz"
    repeat_mask = "/data/genomes/hg38/annotation/ucsc/hg38_rmsk.gtf"
    outdir = "/home/sturm/Downloads/lung_scvelo/results"
}

process {
    withName: prepare_bam {
        conda = "bioconda::samtools=1.15"
        cpus = 8
    }
    withName: velocyto {
        cpus = 6
        conda = "conda-forge::python=3.7 bioconda::velocyto.py bioconda::samtools"
        publishDir = [path: "${params.outdir}", mode: 'copy']
    }
}

resume = true
conda.useMamba = true

